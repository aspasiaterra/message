<!doctype html>
<html lang="tr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Aspasia Hediye Mesajı</title>
  <meta name="robots" content="noindex,nofollow" />

  <style>
    html, body {
      height: 100%;
      margin: 0;
      background: #b79b92;
      display: grid;
      place-items: center;
      font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
    }
    .wrap {
      width: min(980px, 96vw);
      padding: 18px 0;
      position: relative;
    }
    img {
      width: 100%;
      height: auto;
      display: block;
      border-radius: 12px;
      box-shadow: 0 10px 30px rgba(0,0,0,.18);
    }
    canvas#confetti {
      position: fixed;
      inset: 0;
      pointer-events: none;
      z-index: 9999;
    }
    @media (prefers-reduced-motion: reduce) {
      canvas#confetti { display: none; }
    }
  </style>
</head>

<body>
  <canvas id="confetti"></canvas>

  <div class="wrap">
    <!-- Görsel dosyanın adı mesaj.png olmalı -->
    <img alt="Hediye mesajı" src="message_gift.jpg" />
  </div>

  <script>
    // Bağımsız confetti (harici kütüphane yok)
    (function () {
      const canvas = document.getElementById("confetti");
      const ctx = canvas.getContext("2d");
      let raf = null;
      let start = null;
      const pieces = [];
      const COLORS = ["#ffffff","#f7d6e0","#ffe29a","#c7f9cc","#bde0fe","#ffadad"];

      function rand(min, max) { return Math.random() * (max - min) + min; }

      function setupCanvas() {
        const dpr = window.devicePixelRatio || 1;
        canvas.width = Math.floor(window.innerWidth * dpr);
        canvas.height = Math.floor(window.innerHeight * dpr);
        // her seferinde resetle
        ctx.setTransform(dpr, 0, 0, dpr, 0, 0);
      }

      function spawn(n = 180) {
        pieces.length = 0;
        for (let i = 0; i < n; i++) {
          pieces.push({
            x: rand(0, window.innerWidth),
            y: rand(-window.innerHeight, 0),
            r: rand(3, 7),
            vx: rand(-1.2, 1.2),
            vy: rand(2.2, 5.2),
            rot: rand(0, Math.PI),
            vrot: rand(-0.15, 0.15),
            color: COLORS[(Math.random() * COLORS.length) | 0],
            shape: Math.random() < 0.7 ? "rect" : "circle"
          });
        }
      }

      function draw(t) {
        if (!start) start = t;
        const elapsed = (t - start) / 1000;

        ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);

        for (const p of pieces) {
          p.x += p.vx;
          p.y += p.vy;
          p.rot += p.vrot;
          p.vy += 0.02; // hafif yerçekimi

          if (p.y > window.innerHeight + 20) {
            p.y = rand(-100, -20);
            p.x = rand(0, window.innerWidth);
            p.vy = rand(2.2, 5.2);
          }

          ctx.save();
          ctx.translate(p.x, p.y);
          ctx.rotate(p.rot);
          ctx.fillStyle = p.color;

          if (p.shape === "rect") {
            ctx.fillRect(-p.r, -p.r * 0.6, p.r * 2, p.r * 1.2);
          } else {
            ctx.beginPath();
            ctx.arc(0, 0, p.r * 0.75, 0, Math.PI * 2);
            ctx.fill();
          }

          ctx.restore();
        }

        // 4.5 sn sonra durdur
        if (elapsed < 4.5) {
          raf = requestAnimationFrame(draw);
        } else {
          cancelAnimationFrame(raf);
          ctx.clearRect(0, 0, window.innerWidth, window.innerHeight);
        }
      }

      function run() {
        if (window.matchMedia && window.matchMedia("(prefers-reduced-motion: reduce)").matches) return;
        setupCanvas();
        spawn();
        start = null;
        raf = requestAnimationFrame(draw);
      }

      window.addEventListener("resize", () => {
        run();
      });

      run();
    })();
  </script>
</body>
</html>

